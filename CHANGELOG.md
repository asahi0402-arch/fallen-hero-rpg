# CHANGELOG - 堕ちた英雄RPG

## Version 0.8.0 - キャラクター管理システム完全実装 (2025-08-26)

### 🎮 新機能
- **キャラクター個別データ管理システム**
  - 各キャラクターが個別のレベル、経験値、装備を保持
  - ゴールドとインベントリは全キャラクター共通で管理
  - CharacterManagerヘルパー関数による統一的なデータ管理

- **酒場キャラクター購入システム**
  - CSV管理による購入可能キャラクターの設定
  - 購入価格とキャラクター能力値の表示
  - 購入後の自動初期化処理

### 🔧 システム改善
- **ゲームステート構造の大幅リファクタリング**
  - `gameState.characterData`: 各キャラクター個別データ
  - `gameState.shared`: 共通データ（ゴールド・インベントリ）
  - 全ての参照を新しい構造に統一

- **オーディオ管理システム**
  - `data/audio.csv`による音声ファイル管理
  - AudioManagerクラスによる効率的な音声制御
  - 敵攻撃音・魔法音・各種SEの充実

- **スキルアニメーションシステム**
  - skills.csvベースのアニメーション管理
  - 複数アニメーションタイプ対応（fire_burst, heal_light等）
  - 音声と連携したエフェクト表示

### 🎨 UI改善
- **統一ボタンデザイン**
  - ギルド・宿屋・酒場・アイテムショップ・ガチャ・オプション
  - ツールチップ形式の説明表示
  - 戦闘ログとの重複回避レイアウト

- **酒場システム**
  - 購入可能/所有済みキャラクター表示
  - キャラクター能力値とポートレート表示
  - ワンクリック購入＆切り替え機能

### 🐛 バグ修正
- **敵攻撃アニメーション修正**
  - executeEnemySkill内でのアニメーション呼び出し追加
  - 敵の拡大・縮小エフェクト復活
  - 画面揺れと効果音の同期

- **キャラクター切り替え時の問題修正**
  - 各キャラクターの進行状況が正しく保存/復元される
  - 装備品の個別管理
  - 衣服状態の正しい初期化

### 📁 ファイル構造
- `data/audio.csv`: 音声ファイル管理（新規）
- `data/skills.csv`: アニメーション情報追加
- `data/characters.csv`: 購入価格とポートレート情報追加
- `script.js`: CharacterManager追加、ゲームステート構造変更
- `style.css`: 統一ボタンスタイル、アニメーション追加
- `index.html`: 酒場モーダル、統一UI追加

---

## Previous Versions

### Version 0.7.0 - HPベース立ち絵システム＋衣服修理機能完全実装
- HPに基づく立ち絵表示システム
- 衣服ダメージ＆修理システム
- 宿屋での衣服修理機能

### Version 0.6.0 - 戦闘エフェクト完全修正：黒い四角削除＋攻撃アニメーション実装
- 戦闘アニメーション不具合修正
- 攻撃エフェクトの視覚的改善

### Version 0.5.0 - UI改善：敵情報オーバーレイ＋プレイヤーコントロール黒化
- 敵情報表示システム改善
- UIコントロールの視認性向上

### Version 0.4.0 - UI大幅改善：フィールド/ダンジョンシステム＋宿屋＋ガチャ実装
- フィールド・ダンジョン探索システム
- 宿屋システム実装
- ガチャシステム基盤構築

### Version 0.3.0 - 装備システム完全実装＋章別アイテム解禁システム＋UI大幅改善
- 装備システム基盤実装
- 章進行システム
- UI全体の統一性向上