## ■ゲーム要件定義書：「堕ちた英雄」

---

### ■タイトル（仮）：
堕ちた英雄（仮）

---

### ■ジャンル：
章構成型・戦闘育成RPG＋アダルトイラスト収集要素

---

### ■主なテーマ：
「正義と悪の境界」「クローンと自我」「堕落の選択」

---

### ■ゲームの流れ：
- 全6章構成（章ごとに連戦バトル → ボス → 会話 → 次章）
- 7章は6章クリア後に解放。やり込み高難易度ダンジョン＋真の黒幕戦
- 各章：敵を○連戦勝利するとボス登場（例：1章=10連戦）
- 戦闘敗北時：その章の1戦目からやり直し（経験値・金の半分保持）
- プレイヤーはレベルアップと装備、ショップ利用を駆使して攻略

---

### ■特徴・売りポイント：
- 放置も可能なコマンドバトル＋オート攻撃搭載
- 経験値・資金保持で再挑戦型＝ローグライト風の成長ループ
- ステータス育成自由。レベルUP時にポイントを振り分け
- ギャラリー＆イラストガチャあり。キャラ画像を収集・閲覧可能
- ガチャで入手できるイラストにはアダルトH要素あり（詳細は下記）
- 6章クリア時に一旦エンディング → 7章でトゥルー/平和/闇堕ち分岐

---

### ■使用素材：
- キャラ・敵イラスト：StableDiffusion生成（主に女性型）
- UI/背景/BGM/SE：オリジナル or 商用可フリー素材

---

### ■キャラクター数：
- 主人公：1（5段階変化）
- 章ボス：6体＋7章の黒幕（合計7体）
- 一般敵：各章3〜5体程度（女性型モンスター優先）
- ショップNPCなど会話キャラ：3〜5体

---

### ■レベル構成：
- 各章における連戦数と難易度上昇（例：1章=10戦→ボス）
- プレイヤーは途中でショップへ戻れる（戻ると連戦数リセット）
- ステージによって敵構成・背景・BGMが変化

---

### ■セリフ構成：
- ストーリーイベント（章開始/ボス直前/ボス撃破後）
- ショップ会話
- エンディング4種：6章END、トゥルー、平和、闇堕ち（忠実な駒）

---

### ■アイテム・課金要素：
- 戦闘アイテム（回復など）
- 装備：武器、防具（攻撃/防御/状態異常耐性付き）
- イラストガチャ（ランダムで敵/イベントCGを獲得、アダルト含む）

---

### ■ギャラリー：
- ガチャやイベントで入手したイラストを閲覧可能
- レア度：R（セクシー） / SR（敗北H） / SSR（複数差分） / UR（フルシーン差分）
- タグ例：拘束／触手／洗脳／敗北／羞恥／羞恥責め／媚薬／堕ち
- ギャラリーフォルダから閲覧・印刷・壁紙利用も想定
- 差分最大5枚（挿入前→挿入中→絶頂など）
- 条件解放：戦闘勝利・ターン数・特定状態異常など
- 一部イラストはステージ達成報酬でも解放可能

---

### ■周回プレイ・転生要素：
- 6章クリア後に7章が解放
- 7章は通常では攻略困難な高難易度
- トゥルーエンド（短ターン撃破）で真実が明かされる
- トゥルー解放後はタイトルロゴが黒仕様に変化

---

### ■CSV完全外部管理：
- 管理ファイル数：最低15個以上（CSVでの完全管理構造）
- 管理対象：
  - characters.csv：プレイヤーおよびNPCキャラ定義
  - enemies.csv：敵キャラの基本ステータス、画像、報酬等
  - enemy_actions.csv：敵ごとのスキル構成（確率制御）
  - skills.csv：スキル名称、種別、ダメージ倍率、状態異常効果など
  - items.csv：アイテム効果、価格、用途
  - equipment.csv：武器防具、能力補正、価格
  - illustrations.csv：ギャラリー管理用、レアリティ、差分数、タグ、解放条件、画像パス、censor_level
  - stages.csv：各章の構成、敵出現数、背景、BGM
  - その他、シーン・会話・UI構成・アニメ・SEなどすべて外部管理
- 文字コード：BOM付きUTF-8（Excel対応）
- 改行コード：CRLF（Windows形式）
- 値囲み：すべてダブルクォート（"）
- 非エンジニアでもCSV編集で調整可能な構成

---

### ■UI画像・アニメーション仕様：
- 必須画面構成：
  - タイトル画面
  - メインゲーム（バトル）画面
  - 会話イベント画面
  - マルチエンディング画面（分岐演出あり）
- UIパーツは状態別に分離：通常／ホバー／押下
- 攻撃演出・被ダメ演出・スキル演出を視覚エフェクト化
- SE／BGM切替に対応、フェード演出あり

---

### ■技術実装仕様：
- HTML5 / CSS3 / JavaScript で構築
- レスポンシブ対応（スマホでも可）
- LocalStorageで自動セーブ（5秒間隔）
- アクセシビリティ対応（フォントサイズ／音量調整）
- オフライン動作可能（リソースはローカル読み込み）

---

### ■戦闘システム仕様：
- ステータス：HP / MP / 攻撃力 / 防御力 / 魔力 / 素早さ
- レベルアップ：1ポイント割り振り / HP,MP+10 / 他+3
- ダメージ計算：
  - 通常攻撃：攻撃力 - 防御力
  - スキル攻撃：攻撃力 or 魔力 ×倍率 －防御力
- ターン順：素早さ順（SPD降順）
- クリティカル：発生率＝SPD ÷ 200（%）、ガードブレイク効果
- 状態異常：
  - 毒：毎ターン10→20→30…累積ダメ
  - 麻痺：30%で行動不能
  - 睡眠：3ターン行動不能（解除条件未定）
- その他：
  - オート攻撃あり / 防御コマンドなし / アイテム使用で1ターン消費
  - 逃走確率50%

---

